<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PX6NFGMV');</script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration - LDAP Manager</title>
    <meta name="description" content="Complete configuration guide for LDAP Manager: single node, multi-master clusters, user creation forms, table columns, and environment variables.">
    <meta name="keywords" content="ldap manager configuration, ldap config, openldap setup, ldap yaml config">
    <link rel="canonical" href="https://vibhuvioio.com/ldap-manager/configuration.html">
    <link rel="icon" type="image/x-icon" href="img/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="docs.css">
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PX6NFGMV"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="nav-brand" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 12px;">
                <img src="img/ldap.png" alt="LDAP Manager" style="height: 40px; width: auto;">
                <span class="brand-name">LDAP Manager</span>
            </a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="getting-started.html">Docs</a>
                <a href="https://github.com/VibhuviOiO/ldap-manager" target="_blank">GitHub</a>
            </div>
        </div>
    </nav>

    <div class="docs-layout">
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3>Getting Started</h3>
                    <a href="getting-started.html">Installation</a>
                    <a href="configuration.html" class="active">Configuration</a>
                </div>
                <div class="nav-section">
                    <h3>Features</h3>
                    <a href="features.html">Overview</a>
                </div>
                <div class="nav-section">
                    <h3>Contributing</h3>
                    
                    
                    <a href="development.html">Development</a>
                    <a href="testing.html">Testing Guide</a>
                </div>
            </nav>
        </aside>

        <main class="docs-content">
            <h1>Configuration Guide</h1>
            <p>Complete guide to configuring LDAP Manager for your environment.</p>

            <h2>Configuration Approaches</h2>
            <p>LDAP Manager supports two configuration approaches:</p>
            <ul>
                <li><strong>Minimal Configuration</strong> - Quick setup with auto-detection (recommended for beginners)</li>
                <li><strong>Custom Configuration</strong> - Full control over forms and columns (for advanced users)</li>
            </ul>

            <h2>Minimal Configuration (Recommended)</h2>
            <p>The simplest way to get started. The UI automatically detects and shows common LDAP attributes.</p>

            <h3>Single Node Example</h3>
            <pre><code>clusters:
  - name: "Production LDAP"
    host: "ldap.company.com"
    port: 389
    bind_dn: "cn=Manager,dc=company,dc=com"
    base_dn: "dc=company,dc=com"  # Optional - auto-discovered if omitted
    description: "Main production LDAP server"
    readonly: false</code></pre>

            <h3>Multiple Clusters</h3>
            <pre><code>clusters:
  - name: "Production LDAP"
    host: "ldap.company.com"
    port: 389
    bind_dn: "cn=admin,dc=company,dc=com"
    base_dn: "dc=company,dc=com"
    description: "Production environment"
    readonly: false

  - name: "Development LDAP"
    host: "ldap-dev.company.com"
    port: 389
    bind_dn: "cn=admin,dc=dev,dc=company,dc=com"
    base_dn: "dc=dev,dc=company,dc=com"
    description: "Development environment"
    readonly: false</code></pre>

            <div class="note">
                <strong>What you get automatically:</strong>
                <ul>
                    <li><strong>Users table:</strong> Username, Full Name, Email, Type</li>
                    <li><strong>Groups table:</strong> Group Name, Description, Members</li>
                    <li><strong>OUs table:</strong> OU Name, Description, DN</li>
                    <li>Users can click "Columns" button to show/hide additional attributes</li>
                </ul>
            </div>

            <h2>Multi-Master Cluster Configuration</h2>
            <p>For multi-master LDAP clusters with multiple nodes:</p>

            <pre><code>clusters:
  - name: "LDAP Cluster"
    description: "3-node multi-master cluster"
    nodes:
      - host: "ldap1.company.com"
        port: 389
        name: "node1"
      - host: "ldap2.company.com"
        port: 389
        name: "node2"
      - host: "ldap3.company.com"
        port: 389
        name: "node3"
    bind_dn: "cn=Manager,dc=company,dc=com"
    base_dn: "dc=company,dc=com"
    readonly: false</code></pre>

            <h3>Features:</h3>
            <ul>
                <li>Health monitoring for all nodes</li>
                <li>Replication topology visualization</li>
                <li>Automatic failover to healthy nodes</li>
                <li>Sync status monitoring</li>
            </ul>

            <h2>Docker Host Connection</h2>
            <p>For connecting to LDAP running on the Docker host machine:</p>

            <h3>Docker Desktop (Mac/Windows)</h3>
            <pre><code>clusters:
  - name: "Local Docker LDAP"
    host: "host.docker.internal"
    port: 389
    bind_dn: "cn=Manager,dc=example,dc=com"</code></pre>

            <h3>Linux Docker</h3>
            <pre><code>clusters:
  - name: "Local Docker LDAP"
    host: "172.17.0.1"  # Default Docker bridge IP
    port: 389
    bind_dn: "cn=Manager,dc=example,dc=com"</code></pre>

            <h2>User Creation Form Configuration</h2>
            <p>Define custom user creation forms with auto-fill fields and validation.</p>

            <h3>Basic User Creation Form</h3>
            <pre><code>clusters:
  - name: "Corporate LDAP"
    host: "ldap.company.com"
    port: 389
    bind_dn: "cn=admin,dc=company,dc=com"
    
    user_creation_form:
      base_ou: "ou=People,dc=company,dc=com"
      object_classes:
        - inetOrgPerson
        - posixAccount
      fields:
        - name: uid
          label: Username
          type: text
          required: true
        - name: cn
          label: Full Name
          type: text
          required: true
        - name: mail
          label: Email
          type: email
          required: true
          auto_generate: "${uid}@company.com"
        - name: userPassword
          label: Password
          type: password
          required: true</code></pre>

            <h3>Advanced Form with Auto-Generation</h3>
            <pre><code>    user_creation_form:
      base_ou: "ou=People,dc=company,dc=com"
      object_classes:
        - inetOrgPerson
        - posixAccount
        - shadowAccount
      fields:
        - name: uid
          label: Username
          type: text
          required: true
        - name: cn
          label: Full Name
          type: text
          required: true
        - name: sn
          label: Last Name
          type: text
          required: true
        - name: givenName
          label: First Name
          type: text
          required: true
        - name: mail
          label: Email
          type: email
          required: true
          auto_generate: "${uid}@company.com"
        - name: userPassword
          label: Password
          type: password
          required: true
        - name: uidNumber
          label: UID Number
          type: number
          required: true
          auto_generate: "next_uid"
          readonly: true
        - name: gidNumber
          label: Group ID
          type: number
          required: true
          default: 100
        - name: homeDirectory
          label: Home Directory
          type: text
          required: true
          auto_generate: "/home/${uid}"
        - name: loginShell
          label: Shell
          type: text
          required: true
          default: "/bin/bash"</code></pre>

            <h3>Field Types</h3>
            <table>
                <tr>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Example</th>
                </tr>
                <tr>
                    <td><code>text</code></td>
                    <td>Single-line text input</td>
                    <td>Username, Name</td>
                </tr>
                <tr>
                    <td><code>email</code></td>
                    <td>Email with validation</td>
                    <td>user@example.com</td>
                </tr>
                <tr>
                    <td><code>password</code></td>
                    <td>Password input (hidden)</td>
                    <td>User password</td>
                </tr>
                <tr>
                    <td><code>number</code></td>
                    <td>Numeric input</td>
                    <td>UID, GID</td>
                </tr>
                <tr>
                    <td><code>select</code></td>
                    <td>Dropdown selection</td>
                    <td>Department, Role</td>
                </tr>
            </table>

            <h3>Auto-Generate Options</h3>
            <table>
                <tr>
                    <th>Value</th>
                    <th>Description</th>
                    <th>Example</th>
                </tr>
                <tr>
                    <td><code>${uid}@company.com</code></td>
                    <td>Template with variable substitution</td>
                    <td>john@company.com</td>
                </tr>
                <tr>
                    <td><code>next_uid</code></td>
                    <td>Auto-generate next available UID</td>
                    <td>1001, 1002, 1003...</td>
                </tr>
                <tr>
                    <td><code>/home/${uid}</code></td>
                    <td>Path with variable</td>
                    <td>/home/john</td>
                </tr>
            </table>

            <h2>Table Columns Configuration</h2>
            <p>Control which columns are visible by default in tables.</p>

            <h3>Users Table Columns</h3>
            <pre><code>    table_columns:
      users:
        - name: uid
          label: Username
          default_visible: true
        - name: cn
          label: Full Name
          default_visible: true
        - name: mail
          label: Email
          default_visible: true
        - name: uidNumber
          label: UID
          default_visible: false    # Hidden by default
        - name: gidNumber
          label: GID
          default_visible: false    # Hidden by default
        - name: homeDirectory
          label: Home Directory
          default_visible: false    # Hidden by default
        - name: loginShell
          label: Shell
          default_visible: false    # Hidden by default
        - name: objectClass
          label: Type
          default_visible: true</code></pre>

            <h3>Groups Table Columns</h3>
            <pre><code>      groups:
        - name: cn
          label: Group Name
          default_visible: true
        - name: description
          label: Description
          default_visible: true
        - name: members
          label: Members
          default_visible: true
        - name: gidNumber
          label: GID
          default_visible: false
        - name: dn
          label: DN
          default_visible: false</code></pre>

            <h3>OUs Table Columns</h3>
            <pre><code>      ous:
        - name: ou
          label: OU Name
          default_visible: true
        - name: description
          label: Description
          default_visible: true
        - name: dn
          label: DN
          default_visible: true</code></pre>

            <div class="note">
                <strong>Note:</strong> Users can always customize column visibility via the "Columns" button (⚙️) in the UI. The <code>default_visible</code> setting only controls the initial state.
            </div>

            <h2>Custom Schema Example</h2>
            <p>Full example with custom objectClass and attributes:</p>

            <pre><code>clusters:
  - name: "Custom Schema LDAP"
    host: "ldap.example.com"
    port: 389
    bind_dn: "cn=Manager,dc=example,dc=com"
    base_dn: "dc=example,dc=com"
    readonly: false
    
    user_creation_form:
      base_ou: "ou=People,dc=example,dc=com"
      object_classes:
        - inetOrgPerson
        - posixAccount
        - CustomEmployee  # Custom objectClass
      fields:
        - name: uid
          label: Username
          type: text
          required: true
        - name: cn
          label: Full Name
          type: text
          required: true
        - name: mail
          label: Email
          type: email
          required: true
        - name: userPassword
          label: Password
          type: password
          required: true
        # Custom attributes
        - name: department
          label: Department
          type: select
          required: true
          options:
            - Engineering
            - Sales
            - Marketing
        - name: employeeID
          label: Employee ID
          type: text
          required: true
        - name: location
          label: Location
          type: text
          required: false
    
    table_columns:
      users:
        - name: uid
          label: Username
          default_visible: true
        - name: cn
          label: Full Name
          default_visible: true
        - name: mail
          label: Email
          default_visible: true
        - name: department
          label: Department
          default_visible: true      # Custom attribute
        - name: employeeID
          label: Employee ID
          default_visible: true      # Custom attribute
        - name: location
          label: Location
          default_visible: false     # Custom attribute (hidden)</code></pre>

            <h2>Context Path Configuration</h2>
            <p>Serve LDAP Manager under a custom base path (e.g., <code>/ldap-manager/</code>) for integration with other applications.</p>

            <h3>Production Deployment</h3>
            <pre><code># Build and run with context path
CONTEXT_PATH=/ldap-manager docker-compose -f docker-compose.prod.yml up -d

# Access at
http://localhost:8000/ldap-manager/</code></pre>

            <h3>Development Mode</h3>
            <pre><code># Run with context path
CONTEXT_PATH=/ldap-manager docker-compose up

# Access at
http://localhost:5173/ldap-manager/</code></pre>

            <h3>Nginx Reverse Proxy</h3>
            <pre><code>location /ldap-manager/ {
    proxy_pass http://ldap-manager:8000/ldap-manager/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
}</code></pre>

            <div class="note">
                <strong>Note:</strong> For integration with IAM/Auth applications, configure your reverse proxy to forward the context path to LDAP Manager. The parent app handles authentication while LDAP Manager handles directory management.
            </div>

            <h2>Environment Variables</h2>
            <p>Configure LDAP Manager behavior using environment variables in docker-compose.yml:</p>

            <pre><code>services:
  ldap-manager:
    image: ghcr.io/vibhuvioio/ldap-manager:latest
    ports:
      - "5173:5173"
      - "8000:8000"
    volumes:
      - ./config.yml:/app/config.yml
    environment:
      - PYTHONUNBUFFERED=1
      - VITE_FOOTER_TEXT=LDAP Manager • My Company
      - CONTEXT_PATH=/ldap-manager  # Optional: custom base path</code></pre>

            <h3>Available Variables</h3>
            <table>
                <tr>
                    <th>Variable</th>
                    <th>Description</th>
                    <th>Default</th>
                </tr>
                <tr>
                    <td><code>PYTHONUNBUFFERED</code></td>
                    <td>Python output buffering</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td><code>VITE_FOOTER_TEXT</code></td>
                    <td>Custom footer text (HTML allowed)</td>
                    <td>LDAP Manager</td>
                </tr>
                <tr>
                    <td><code>CONTEXT_PATH</code></td>
                    <td>Custom base path for app</td>
                    <td>/</td>
                </tr>
            </table>

            <h2>Configuration Best Practices</h2>

            <h3>Start Simple</h3>
            <ul>
                <li>Begin with minimal configuration</li>
                <li>Add custom forms only when needed</li>
                <li>Let UI auto-detect columns initially</li>
                <li>Customize based on user feedback</li>
            </ul>

            <h3>Security</h3>
            <ul>
                <li>Use <code>readonly: true</code> for read-only access</li>
                <li>Restrict bind DN permissions</li>
                <li>Use strong passwords</li>
                <li>Enable TLS/SSL in production</li>
            </ul>

            <h3>Performance</h3>
            <ul>
                <li>Specify <code>base_dn</code> to avoid auto-discovery overhead</li>
                <li>Limit visible columns to improve load times</li>
                <li>Use server-side pagination for large directories</li>
            </ul>

            <h2>Complete Example</h2>
            <p>Production-ready configuration with all features:</p>

            <pre><code>clusters:
  # Production cluster with full configuration
  - name: "Production LDAP Cluster"
    description: "Main production directory"
    nodes:
      - host: "ldap1.company.com"
        port: 389
        name: "node1"
      - host: "ldap2.company.com"
        port: 389
        name: "node2"
      - host: "ldap3.company.com"
        port: 389
        name: "node3"
    bind_dn: "cn=Manager,dc=company,dc=com"
    base_dn: "dc=company,dc=com"
    readonly: false
    
    user_creation_form:
      base_ou: "ou=People,dc=company,dc=com"
      object_classes: [inetOrgPerson, posixAccount]
      fields:
        - name: uid
          label: Username
          type: text
          required: true
        - name: cn
          label: Full Name
          type: text
          required: true
        - name: mail
          label: Email
          type: email
          required: true
          auto_generate: "${uid}@company.com"
        - name: userPassword
          label: Password
          type: password
          required: true
    
    table_columns:
      users:
        - name: uid
          label: Username
          default_visible: true
        - name: cn
          label: Full Name
          default_visible: true
        - name: mail
          label: Email
          default_visible: true
        - name: objectClass
          label: Type
          default_visible: true

  # Development cluster with minimal config
  - name: "Development LDAP"
    host: "ldap-dev.company.com"
    port: 389
    bind_dn: "cn=admin,dc=dev,dc=company,dc=com"
    readonly: false</code></pre>

            <h2>Next Steps</h2>
            <ul>
                <li><a href="features.html">Explore all features</a></li>
                <li><a href="security.html">Review security best practices</a></li>
                <li><a href="api.html">Learn about API endpoints</a></li>
            </ul>
        </main>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>Developed by <a href="https://vibhuvioio.com" target="_blank">Vibhuvi OiO</a> • Founded by <a href="https://jinnabalu.com" target="_blank">Jinna Baalu</a></p>
                <p class="footer-message">Giving back through open source</p>
            </div>
        </div>
    </footer>
</body>
</html>
