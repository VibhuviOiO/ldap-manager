<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PX6NFGMV');</script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration Guide - Docker Registry UI Multi-Registry Setup</title>
    <meta name="description" content="Configure Docker Registry UI with multiple registries, authentication (basic auth, bearer token), read-only mode, and environment variables.">
    <meta name="keywords" content="docker registry configuration, multi-registry setup, docker registry authentication, registry config json, docker registry bearer token">
    <link rel="canonical" href="https://vibhuvioio.com/docker-registry-ui/configuration.html">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üê≥</text></svg>">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="docs.css">
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PX6NFGMV"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <nav class="navbar">
        <div class="container">
            <a href="https://vibhuvioio.com/docker-registry-ui/" class="nav-brand" style="text-decoration: none; color: inherit;">
                <span class="logo">üê≥</span>
                <span class="brand-name">Docker Registry UI</span>
            </a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="getting-started.html">Docs</a>
                <a href="https://github.com/vibhuvi/docker-registry-ui" target="_blank">GitHub</a>
            </div>
        </div>
    </nav>

    <div class="docs-layout">
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3>Getting Started</h3>
                    <a href="getting-started.html">Installation</a>
                    <a href="configuration.html" class="active">Configuration</a>
                </div>
                <div class="nav-section">
                    <h3>Features</h3>
                    <a href="features.html">Overview</a>
                    <a href="security.html">Security Scanning</a>
                    <a href="bulk-operations.html">Bulk Operations</a>
                </div>
                <div class="nav-section">
                    <h3>Examples</h3>
                    <a href="example-multi-registry.html">Multi-Registry Setup</a>
                    <a href="example-basic-auth.html">Basic Auth Registry</a>
                </div>
                <div class="nav-section">
                    <h3>Reference</h3>
                    <a href="api.html">API Integration</a>
                    <a href="development.html">Development</a>
                    <a href="testing.html">Testing Guide</a>
                </div>
            </nav>
        </aside>

        <main class="docs-content">
            <h1>Configuration Guide</h1>

            <h2>Configuration Methods</h2>
            <p>You can configure registries in two ways:</p>
            <ul>
                <li><strong>Setup Wizard</strong>: On first run, the UI shows a setup wizard to configure your registry through the web interface</li>
                <li><strong>Config File</strong>: Pre-create a <code>registries.config.json</code> file for automated deployments</li>
            </ul>

            <h2>Environment Variables</h2>
            <table>
                <thead>
                    <tr>
                        <th>Variable</th>
                        <th>Description</th>
                        <th>Default</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                          <td><code>CONFIG_FILE</code></td>
                          <td>Path to registries configuration file (optional - setup wizard used if not provided). By default the app checks <code>/app/registries.config.json</code>. When running inside the official container it is common to set this to <code>/app/data/registries.config.json</code> (for example by mounting <code>./data:/app/data</code>).</td>
                          <td><code>/app/registries.config.json</code></td>
                        </tr>
                    <tr>
                        <td><code>READ_ONLY</code></td>
                        <td>Enable read-only mode (disable delete operations)</td>
                        <td><code>false</code></td>
                    </tr>
                    <tr>
                        <td><code>PORT</code></td>
                        <td>Port for the web interface</td>
                        <td><code>5000</code></td>
                    </tr>

                </tbody>
            </table>

            <h2>Setup Wizard (First Run)</h2>
            <p>If no configuration file exists, the UI displays a setup wizard on first access:</p>
            <img src="img/setup-wizard.png" alt="Setup Wizard First Run" style="max-width: 100%; border: 1px solid #e3e8ef; border-radius: 5px; margin: 20px 0;">
            <ol>
                <li>Access the UI at <code>http://localhost:5000</code></li>
                <li>Enter registry details:
                    <ul>
                        <li><strong>Registry Name</strong>: Friendly name (e.g., "Local Registry")</li>
                        <li><strong>Registry URL</strong>: API endpoint (e.g., <code>http://localhost:5001</code>)</li>
                        <li><strong>Authentication</strong>: Enable if registry requires credentials</li>
                    </ul>
                </li>
                <li>Click "Test Connection" to verify</li>
                <li>Save configuration</li>
                <li>Configuration is saved to the directory containing the configured <code>CONFIG_FILE</code> (for example if <code>CONFIG_FILE=/app/data/registries.config.json</code>, files are saved under <code>/app/data</code>).</li>
            </ol>

            <h2>Manual Configuration File</h2>
            <p>For automated deployments, create a <code>registries.config.json</code> file before starting the UI:</p>

            <h3>Create the config file (example)</h3>
            <p>Create a directory to hold the config (for example <code>./data</code>) and add a file named <code>registries.config.json</code>. The application will read whatever path you point <code>CONFIG_FILE</code> at (see environment variables above). Example minimal file:</p>
            <pre><code>mkdir -p data
cat > ./data/registries.config.json <<'JSON'
{
  "registries": [
    {
      "name": "Local Registry",
      "api": "http://localhost:5001",
      "auth": { "type": "none" }
    }
  ]
}
JSON</code></pre>

            <p>When launching the container, mount the <code>data</code> directory and set <code>CONFIG_FILE=/app/data/registries.config.json</code> so the app finds the file and persists scan results in the same directory.</p>

            <h3>Local Registry (No Authentication)</h3>
            <pre><code>{
  "registries": [
    {
      "name": "Local Registry",
      "api": "http://localhost:5001",
      "auth": {
        "type": "none"
      }
    }
  ]
}</code></pre>

            <h3>Registry with Basic Authentication</h3>
            <pre><code>{
  "registries": [
    {
      "name": "Private Registry",
      "api": "https://registry.example.com",
      "auth": {
        "type": "basic",
        "username": "admin",
        "password": "secret"
      }
    }
  ]
}</code></pre>

            <h3>Multiple Registries</h3>
            <pre><code>{
  "registries": [
    {
      "name": "Local Registry",
      "api": "http://localhost:5001",
      "auth": {
        "type": "none"
      }
    },
    {
      "name": "Production Registry",
      "api": "https://registry.prod.example.com",
      "auth": {
        "type": "basic",
        "username": "admin",
        "password": "prod-secret"
      }
    }
  ]
}</code></pre>

            <h2>Docker Compose Configuration</h2>
            <p>Complete example with registry and UI:</p>
            <pre><code>version: '3.8'

services:
  registry:
    image: registry:2
    ports:
      - "5001:5000"
    environment:
      REGISTRY_STORAGE_DELETE_ENABLED: "true"
    volumes:
      - registry-data:/var/lib/registry

  registry-ui:
    image: ghcr.io/vibhuvioio/docker-registry-ui:latest
    ports:
      - "5000:5000"
    environment:
      - CONFIG_FILE=/app/data/registries.config.json
      - READ_ONLY=false
    volumes:
      - ./data:/app/data
    depends_on:
      - registry

volumes:
  registry-data:</code></pre>

            <h2>Security Considerations</h2>
            <ul>
                <li>Store credentials securely (use Docker secrets or environment variables)</li>
                <li>Use HTTPS for production registries</li>
                <li>Enable read-only mode in production environments</li>
                <li>Restrict network access to the UI</li>
                <li>Regularly update the UI and Trivy scanner</li>
            </ul>
        </main>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>Developed by <a href="https://vibhuvioio.com" target="_blank">Vibhuvi OiO</a> ‚Ä¢ Founded by <a href="https://jinnabalu.com" target="_blank">Jinna Baalu</a></p>
                <p class="footer-message">Giving back through open source</p>
            </div>
        </div>
    </footer>
</body>
</html>
