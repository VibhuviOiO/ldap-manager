<!DOCTYPE html>
<html lang="en">
<head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WCRSK785');</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Development Guide - LDAP Manager</title>
    <meta name="description" content="Development guide for LDAP Manager contributors: setup, architecture, technology stack, and contribution guidelines.">
    <link rel="canonical" href="https://vibhuvioio.com/ldap-manager/development.html">
    <link rel="icon" type="image/x-icon" href="img/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="docs.css">
</head>
<body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WCRSK785" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="nav-brand" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 12px;">
                <img src="img/ldap.png" alt="LDAP Manager" style="height: 40px; width: auto;">
                <span class="brand-name">LDAP Manager</span>
            </a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="getting-started.html">Docs</a>
                <a href="https://github.com/VibhuviOiO/ldap-manager" target="_blank">GitHub</a>
            </div>
        </div>
    </nav>

    <div class="docs-layout">
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3>Getting Started</h3>
                    <a href="getting-started.html">Installation</a>
                    <a href="configuration.html">Configuration</a>
                </div>
                <div class="nav-section">
                    <h3>Features</h3>
                    <a href="features.html">Overview</a>
                    <a href="security.html">Security</a>
                </div>
                <div class="nav-section">
                    <h3>Deployment</h3>
                    <a href="production.html">Production Guide</a>
                </div>
                <div class="nav-section">
                    <h3>Contributing</h3>
                    <a href="development.html" class="active">Development Guide</a>
                    <a href="testing.html">Testing Guide</a>
                </div>
            </nav>
        </aside>

        <main class="docs-content">
            <h1>Development Guide</h1>
            <p>Complete guide for developers who want to contribute to LDAP Manager.</p>

            <h2>Technology Stack</h2>

            <h3>Frontend</h3>
            <ul>
                <li><strong>React 18</strong> - Modern UI framework with hooks</li>
                <li><strong>TypeScript</strong> - Type-safe JavaScript</li>
                <li><strong>Vite</strong> - Fast build tool and dev server</li>
                <li><strong>shadcn/ui</strong> - Beautiful UI components built on Radix UI + Tailwind CSS</li>
                <li><strong>SOLID Services Architecture</strong> - Abstraction-based HTTP client with dependency injection for reusability</li>
                <li><strong>Axios</strong> - HTTP client library (via IHttpClient abstraction)</li>
                <li><strong>React Router</strong> - Client-side routing</li>
                <li><strong>Tailwind CSS</strong> - Utility-first CSS framework</li>
            </ul>

            <h3>Backend</h3>
            <ul>
                <li><strong>FastAPI</strong> - Modern Python web framework</li>
                <li><strong>Python 3.11+</strong> - Latest Python features</li>
                <li><strong>python-ldap</strong> - LDAP client library</li>
                <li><strong>PyYAML</strong> - YAML configuration parsing</li>
                <li><strong>Pydantic</strong> - Data validation and settings management</li>
                <li><strong>cryptography</strong> - Fernet symmetric encryption for password storage</li>
                <li><strong>Uvicorn</strong> - ASGI server</li>
            </ul>

            <h3>Testing</h3>
            <ul>
                <li><strong>Frontend E2E</strong> - Playwright with 95 tests across Chrome, Firefox, Safari</li>
                <li><strong>Backend Unit/Integration</strong> - pytest with 104 tests (97% pass rate)</li>
                <li><strong>Coverage Target</strong> - >80% code coverage for backend</li>
                <li><strong>Security Testing</strong> - Encryption, injection protection, authentication</li>
            </ul>

            <h4>Backend Test Suite</h4>
            <ul>
                <li>24 tests - Password encryption and cache security</li>
                <li>19 tests - Load balancing and node selection</li>
                <li>20 tests - LDAP client operations</li>
                <li>25 tests - API endpoints and security</li>
                <li>15 tests - Connection pooling</li>
            </ul>

            <h2>Project Structure</h2>
            <pre><code>ldap-manager/
├── backend/
│   ├── app/
│   │   ├── api/              # API endpoints
│   │   │   ├── entries.py    # LDAP entries endpoints
│   │   │   ├── monitoring.py # Health monitoring
│   │   │   └── connection.py # Connection management
│   │   ├── core/             # Core functionality
│   │   │   ├── ldap_client.py # LDAP operations
│   │   │   └── config.py     # Configuration loader
│   │   ├── models/           # Data models
│   │   └── main.py           # FastAPI application
│   └── requirements.txt      # Python dependencies
├── frontend/
│   ├── src/
│   │   ├── components/       # React components
│   │   │   ├── Dashboard.tsx
│   │   │   ├── ClusterDetails.tsx
│   │   │   ├── DirectoryTable.tsx
│   │   │   ├── CreateUserDialog.tsx
│   │   │   ├── EditUserDialog.tsx
│   │   │   ├── MonitoringView.tsx
│   │   │   └── ReplicationTopology.tsx
│   │   ├── lib/              # Utilities
│   │   ├── services/         # API services
│   │   ├── App.tsx           # Main app component
│   │   └── main.tsx          # Entry point
│   ├── tests/                # E2E tests
│   └── package.json          # Node dependencies
├── docs/                     # Documentation
├── config.yml                # Cluster configuration
├── docker-compose.yml        # Docker setup
├── Dockerfile                # Container image
└── README.md                 # Project readme</code></pre>

            <h2>Local Development Setup</h2>

            <h3>Prerequisites</h3>
            <ul>
                <li>Python 3.11+</li>
                <li>Node.js 20+</li>
                <li>Git</li>
                <li>OpenLDAP server (for testing)</li>
            </ul>

            <h3>1. Clone Repository</h3>
            <pre><code>git clone https://github.com/VibhuviOiO/ldap-manager.git
cd ldap-manager</code></pre>

            <h3>2. Backend Setup</h3>
            <pre><code># Create virtual environment
cd backend
python -m venv venv

# Activate virtual environment
source venv/bin/activate  # Linux/Mac
# or
venv\Scripts\activate     # Windows

# Install dependencies
pip install -r requirements.txt

# Run backend server
uvicorn app.main:app --reload --port 8000</code></pre>

            <p>Backend will be available at <code>http://localhost:8000</code></p>

            <h3>3. Frontend Setup</h3>
            <pre><code># Install dependencies
cd frontend
npm install

# Run development server
npm run dev</code></pre>

            <p>Frontend will be available at <code>http://localhost:5173</code></p>

            <h3>4. Configuration</h3>
            <p>Create <code>config.yml</code> in the root directory:</p>
            <pre><code>clusters:
  - name: "Development LDAP"
    host: "localhost"
    port: 389
    bind_dn: "cn=Manager,dc=example,dc=com"
    base_dn: "dc=example,dc=com"</code></pre>

            <h2>Running Tests</h2>

            <h3>Backend Tests</h3>
            <pre><code># Install test dependencies
cd backend
pip install -r requirements-test.txt

# Run all tests with coverage
pytest --cov=app --cov-report=html --cov-report=term-missing

# Run specific test file
pytest tests/test_password_cache.py -v

# Run tests by category
pytest -m security  # Security tests only</code></pre>

            <p>View coverage report: <code>open htmlcov/index.html</code></p>

            <h4>Test Categories</h4>
            <ul>
                <li><code>tests/test_password_cache.py</code> - Password encryption and TTL</li>
                <li><code>tests/test_node_selector.py</code> - Load balancing and failover</li>
                <li><code>tests/test_ldap_client.py</code> - LDAP operations</li>
                <li><code>tests/test_api_entries.py</code> - API endpoints and security</li>
                <li><code>tests/test_connection_pool.py</code> - Connection pooling</li>
                <li><code>tests/test_config_validator.py</code> - Configuration validation</li>
            </ul>

            <h3>Frontend E2E Tests</h3>
            <pre><code>cd frontend
npm run test           # Vitest unit tests
npx playwright test    # E2E tests (all browsers)
npx playwright test --headed  # Watch tests run</code></pre>

            <h2>Architecture</h2>

            <h3>Frontend Architecture</h3>
            <pre><code>Browser
   ↓
React App (Port 5173)
   ↓
Services Layer (ClusterService, EntryService, etc.)
   ↓
IHttpClient Interface (SOLID: Dependency Inversion)
   ↓
AxiosHttpClient Implementation
   ↓
Backend API (Port 8000)
   ↓
python-ldap
   ↓
OpenLDAP Server</code></pre>

            <h3>Component Hierarchy</h3>
            <pre><code>App.tsx
├── Dashboard.tsx
│   └── ClusterCard (for each cluster)
└── ClusterDetails.tsx
    ├── DirectoryTable.tsx
    │   ├── CreateUserDialog.tsx
    │   ├── EditUserDialog.tsx
    │   └── ColumnSettings.tsx
    ├── MonitoringView.tsx
    │   ├── DirectoryStats.tsx
    │   ├── NodeSyncStats.tsx
    │   └── ReplicationTopology.tsx
    └── ActivityLogView.tsx</code></pre>

            <h3>API Flow</h3>
            <pre><code>Frontend Request
   ↓
/api/entries/search
   ↓
FastAPI Endpoint
   ↓
LDAP Client
   ↓
ldapsearch with pagination
   ↓
Parse Results
   ↓
JSON Response</code></pre>

            <h2>Key Components</h2>

            <h3>Dashboard.tsx</h3>
            <p>Main landing page showing all configured clusters with health status.</p>

            <h3>ClusterDetails.tsx</h3>
            <p>Cluster view with tabs: Users, Groups, OUs, All, Monitoring, Activity.</p>

            <h3>DirectoryTable.tsx</h3>
            <p>Reusable table component with search, pagination, and column customization.</p>

            <h3>CreateUserDialog.tsx</h3>
            <p>Dynamic form for creating users based on config.yml user_creation_form.</p>

            <h3>MonitoringView.tsx</h3>
            <p>Health monitoring dashboard with stats and replication topology.</p>

            <h3>ReplicationTopology.tsx</h3>
            <p>Visual representation of multi-master replication using SVG.</p>

            <h2>Development Workflow</h2>

            <h3>1. Create Feature Branch</h3>
            <pre><code>git checkout -b feature/your-feature-name</code></pre>

            <h3>2. Make Changes</h3>
            <ul>
                <li>Follow existing code style</li>
                <li>Add TypeScript types</li>
                <li>Update tests if needed</li>
                <li>Test locally</li>
            </ul>

            <h3>3. Run Tests</h3>
            <pre><code>cd frontend
npm run test:e2e</code></pre>

            <h3>4. Commit Changes</h3>
            <pre><code>git add .
git commit -m "feat: add new feature"</code></pre>

            <h3>5. Push and Create PR</h3>
            <pre><code>git push origin feature/your-feature-name</code></pre>

            <p>Then create a Pull Request on GitHub.</p>

            <h2>Code Style Guidelines</h2>

            <h3>TypeScript/React</h3>
            <ul>
                <li>Use functional components with hooks</li>
                <li>Define proper TypeScript interfaces</li>
                <li>Use meaningful variable names</li>
                <li>Keep components small and focused</li>
                <li>Extract reusable logic into custom hooks</li>
            </ul>

            <h3>Python/FastAPI</h3>
            <ul>
                <li>Follow PEP 8 style guide</li>
                <li>Use type hints</li>
                <li>Write docstrings for functions</li>
                <li>Handle errors gracefully</li>
                <li>Use async/await where appropriate</li>
            </ul>

            <h3>Example: Good Component</h3>
            <pre><code>interface UserTableProps {
  entries: LDAPEntry[];
  onEdit: (dn: string) => void;
  onDelete: (dn: string) => void;
}

export function UserTable({ entries, onEdit, onDelete }: UserTableProps) {
  return (
    &lt;table&gt;
      {entries.map(entry => (
        &lt;tr key={entry.dn}&gt;
          &lt;td&gt;{entry.uid}&lt;/td&gt;
          &lt;td&gt;{entry.cn}&lt;/td&gt;
        &lt;/tr&gt;
      ))}
    &lt;/table&gt;
  );
}</code></pre>

            <h2>Adding New Features</h2>

            <h3>Adding a New API Endpoint</h3>
            <ol>
                <li>Create endpoint in <code>backend/app/api/</code></li>
                <li>Add LDAP operation in <code>backend/app/core/ldap_client.py</code></li>
                <li>Create frontend service in <code>frontend/src/services/</code></li>
                <li>Add UI component in <code>frontend/src/components/</code></li>
                <li>Write tests in <code>frontend/tests/e2e/</code></li>
            </ol>

            <h3>Adding a New UI Component</h3>
            <ol>
                <li>Create component file in <code>frontend/src/components/</code></li>
                <li>Define TypeScript interfaces</li>
                <li>Use shadcn/ui components</li>
                <li>Add to parent component</li>
                <li>Test in browser</li>
            </ol>

            <h2>Building for Production</h2>

            <h3>Build Docker Image</h3>
            <pre><code>docker build -t ldap-manager:latest .</code></pre>

            <h3>Test Production Build</h3>
            <pre><code>docker run -d \
  -p 5173:5173 \
  -p 8000:8000 \
  -v ./config.yml:/app/config.yml \
  ldap-manager:latest</code></pre>

            <h2>Contributing Guidelines</h2>

            <h3>Before Submitting PR</h3>
            <ul>
                <li>✅ Code follows style guidelines</li>
                <li>✅ All tests pass</li>
                <li>✅ No console errors</li>
                <li>✅ Feature works in Chrome, Firefox, Safari</li>
                <li>✅ Documentation updated if needed</li>
                <li>✅ Commit messages are clear</li>
            </ul>

            <h3>PR Description Template</h3>
            <pre><code>## What does this PR do?
Brief description of changes

## Type of change
- [ ] Bug fix
- [ ] New feature
- [ ] Breaking change
- [ ] Documentation update

## Testing
How was this tested?

## Screenshots (if applicable)
Add screenshots for UI changes</code></pre>

            <h2>Getting Help</h2>
            <ul>
                <li><strong>GitHub Issues</strong> - Report bugs or request features</li>
                <li><strong>GitHub Discussions</strong> - Ask questions</li>
                <li><strong>Documentation</strong> - Check existing docs</li>
                <li><strong>Code Comments</strong> - Read inline documentation</li>
            </ul>

            <h2>Resources</h2>
            <ul>
                <li><a href="https://react.dev/" target="_blank">React Documentation</a></li>
                <li><a href="https://www.typescriptlang.org/docs/" target="_blank">TypeScript Docs</a></li>
                <li><a href="https://fastapi.tiangolo.com/" target="_blank">FastAPI Documentation</a></li>
                <li><a href="https://ui.shadcn.com/" target="_blank">shadcn/ui Components</a></li>
                <li><a href="https://playwright.dev/" target="_blank">Playwright Testing</a></li>
                <li><a href="https://www.python-ldap.org/" target="_blank">python-ldap Docs</a></li>
            </ul>

            <h2>Next Steps</h2>
            <ul>
                <li><a href="testing.html">Learn about testing</a></li>
                <li><a href="features.html">Explore all features</a></li>
                <li><a href="https://github.com/VibhuviOiO/ldap-manager" target="_blank">View source code</a></li>
            </ul>
        </main>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>Developed by <a href="https://vibhuvioio.com" target="_blank">Vibhuvi OiO</a></p>
                <p class="footer-message">Giving back through open source</p>
            </div>
        </div>
    </footer>
</body>
</html>
